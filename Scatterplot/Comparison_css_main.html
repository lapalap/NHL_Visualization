<!DOCTYPE html>
<html>
<title>W3.CSS Template</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
.w3-sidebar a {font-family: "Roboto", sans-serif}
body,h1,h2,h3,h4,h5,h6,.w3-wide {font-family: "Montserrat", sans-serif;}
.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}
.dot {
  stroke: #000;
}
.tooltip {
  position: absolute; 
  text-align: center;           
  background:lightsteelblue;
  width: 300px;
  padding: 4px;   
  border: 4px;    
  border-radius: 8px;     
  pointer-events: none;
}
.column {
  float: left;
  width: 50%;
}
.column_mini_left {
  float: left;
  width: 30%;
}
.column_mini_right {
  float: right;
  width: 70%;
}
/*Clear floats after the columns */
.row:after {
  content: "";
  display: table;
  clear: both;
}
.profile_photo_left {visibility: hidden;
  display: block;
  margin-left: auto;
  margin-right: auto;
  border: 1px solid #000000;}

  .profile_photo_right {visibility: hidden;
    display: block;
    margin-left: auto;
    margin-right: auto;
    border: 1px solid #000000;}
    .chart {
      margin: 10px;
      padding-top: 10px;
    }

    .chart .right {
      stroke: white;
      fill: indianred;
    }

    .chart .left {
      stroke: white;
      fill: steelblue;
    }

    .chart rect:hover {
      fill: #64707d;
    }

    .chart text {
      fill: #24da82;
    }

    .chart text.name {
      fill: black;
    }

    .chart text.title {
      fill: #2216ff;
    }
    .mainBars rect{
  shape-rendering: auto;
  fill-opacity: 0;
  stroke-width: 0.5px;
  stroke: rgb(0, 0, 0);
  stroke-opacity: 0;
}
.subBars{
  shape-rendering:crispEdges;
}
.edges{
  stroke:none;
  fill-opacity:0.5;
}
.header{
  text-anchor:middle;
  font-size:16px;
}
line{
  stroke:grey;
}


  </style>
  <head>
    <title>Rink Plots</title>
    <link rel="stylesheet" type="text/css" href="assets/css/rink-style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript" src="assets/js/rinkPlot_original.js"></script>
    <script src="js/jquery.min.js"></script>
    <script src="js/selectize.js"></script>
    <script src="js/radarChart.js"></script> 
    <script src="js/index.js"></script>
    <link rel="stylesheet" href="css/normalize.css">
    <script src="https://d3js.org/d3.v4.min.js"></script>
<script src="http://vizjs.org/viz.v1.1.0.min.js"></script>
    <!-- <link rel="stylesheet" href="css/stylesheet.css"> -->
  </head>
  <body class="w3-content" style="max-width:1500px">
    <script src="https://d3js.org/d3.v3.min.js"></script>
    <!--   <div class="chart" id="full-rink-horz"></div> -->

    <!-- Sidebar/menu -->
    <nav class="w3-sidebar w3-bar-block w3-white w3-collapse w3-top" style="z-index:3;width:250px" id="mySidebar">
      <div class="w3-container w3-display-container w3-padding-16">
        <i onclick="w3_close()" class="fa fa-remove w3-hide-large w3-button w3-display-topright"></i>
        <h3 class="w3-wide"><b>NHL visualization</b></h3>
      </div>
      <div class="w3-padding-64 w3-large w3-text-grey" style="font-weight:bold">
        <a href="#" class="w3-bar-item w3-button">Teams summary</a>
        <a href="#" class="w3-bar-item w3-button">Player stats</a>
      </nav>

      <!-- Top menu on small screens -->
      <header class="w3-bar w3-top w3-hide-large w3-black w3-xlarge">
        <div class="w3-bar-item w3-padding-24 w3-wide">NHL visualization</div>
        <a href="javascript:void(0)" class="w3-bar-item w3-button w3-padding-24 w3-right" onclick="w3_open()"><i class="fa fa-bars"></i></a>
      </header>

      <!-- Overlay effect when opening sidebar on small screens -->
      <!-- <div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div> -->

      <!-- !PAGE CONTENT! -->
      <div class="w3-main" id = "main" style="margin-left:250px">

        <!-- Push down content on small screens -->
        <div class="w3-hide-large" style="margin-top:83px"></div>

        <!-- Top header -->
        <header class="w3-container w3-xlarge">
          <p class="w3-left" style="font-size:160%;">Players side-by-side comparison</p>
        </header>
        <div  class="w3-display-container w3-container" id = "general">
          <div class="control-group" style="margin-top:30px">
            <label for="select-player" style="text-align:center;">Players:</label>
            <select id="select-player" name="player[]" multiple class="demo-default" style="width:50%" placeholder="Select a player..." style="text-align:center;">
              <option value="">Select a player...</option>
              <option value=8471214>Alex Ovechkin</option>
              <option value=8471675>Sidney Crosby</option>
              <option value=8474141>Patrick Kane</option>
              <option value=8470794>Joe Pavelski</option>
              <option value=8475765>Vladimir Tarasenko</option>
              <option value=8475166>John Tavares</option>
              <option value=8475794>Tyler Seguin</option>
              <option value=8473994>Jamie Benn</option>
              <option value=8471215>Evgeni Malkin</option>
              <option value=8470621>Corey Perry</option>
              <option value=8473419>Brad Marchand</option>
              <option value=8473604>Jonathan Toews</option>
              <option value=8474564>Steven Stamkos</option>
              <option value=8473548>Phil Kessel</option>
              <option value=8474053>Logan Couture</option>
              <option value=8474157>Max Pacioretty</option>
              <option value=8476453>Nikita Kucherov</option>
              <option value=8471707>James Neal</option>
              <option value=8470604>Jeff Carter</option>
              <option value=8466139>Patrick Marleau</option>
              <option value=8470638>Patrice Bergeron</option>
              <option value=8470041>Rick Nash</option>
              <option value=8471698>T.J. Oshie</option>
              <option value=8474190>Wayne Simmonds</option>
              <option value=8470610>Zach Parise</option>
              <option value=8474037>James van Riemsdyk</option>
              <option value=8471218>Blake Wheeler</option>
              <option value=8471685>Anze Kopitar</option>
              <option value=8475168>Matt Duchene</option>
              <option value=8475784>Jeff Skinner</option>
            </select>
          </div>

          <div class="row" id="row">
            <div class="column" id="column_left" style="text-align:center;">
              <img id ="left_profile_photo" class="profile_photo_left" src="../data/Players/Images/8475784.jpg" width="150" style="text-align:center;">
              <p id="name_left_column" class="w3-large" style="color: black;"></p>
              <div id = "description_left" style="text-align:center;"></div>
              <div id = "field_left" style="text-align:center;"></div>
            </div>
            <div class="column" id="column_right" style="text-align:center;">
              <img id ="right_profile_photo" class="profile_photo_right" src="../data/Players/Images/8475784.jpg" width="150" style="text-align:center;">
              <p id="name_right_column" class="w3-large" style="color: black;"></p>
              <div id = "description_right" style="text-align:center;"></div>
              <div id = "field_right" style="text-align:center;"></div>
            </div>
          </div>

          <div class="row" id="hist" style="text-align:center;">
          </div>


          <script>
            var season = $('#select-season').selectize({
              create: true,
              dropdownParent: 'body'
            });

            console.log(season.value);



            var selection = $('#select-player').selectize({
              maxItems: 2,
              delimiter: ',',
              onChange: function(value) {
             // alert(value);

             var dict = {8471214 : 'Alex Ovechkin',
             8471675 : 'Sidney Crosby',
             8474141 : 'Patrick Kane',
             8470794 : 'Joe Pavelski',
             8475765 : 'Vladimir Tarasenko',
             8475166 : 'John Tavares',
             8475794 : 'Tyler Seguin',
             8473994 : 'Jamie Benn',
             8471215 : 'Evgeni Malkin',
             8470621 : 'Corey Perry',
             8473419 : 'Brad Marchand',
             8473604 : 'Jonathan Toews',
             8474564 : 'Steven Stamkos',
             8473548 : 'Phil Kessel',
             8474053 : 'Logan Couture',
             8474157 : 'Max Pacioretty',
             8476453 : 'Nikita Kucherov',
             8471707 : 'James Neal',
             8470604 : 'Jeff Carter',
             8466139 : 'Patrick Marleau',
             8470638 : 'Patrice Bergeron',
             8470041 : 'Rick Nash',
             8471698 : 'T.J. Oshie',
             8474190 : 'Wayne Simmonds',
             8470610 : 'Zach Parise',
             8474037 : 'James van Riemsdyk',
             8471218 : 'Blake Wheeler',
             8471685 : 'Anze Kopitar',
             8475168 : 'Matt Duchene',
             8475784 : 'Jeff Skinner'};

             if (value[1] != null) {

               document.getElementById('name_left_column').innerHTML = dict[value[0]];
               document.getElementById('name_right_column').innerHTML = dict[value[1]];

               d3.select("svg").remove();
               d3.select("svg").remove();

               var imgReplace_left = document.getElementById("left_profile_photo");
               imgReplace_left.src = "../data/Players/Images/"+value[0]+".jpg";
               imgReplace_left.style.visibility = "visible";
               imgReplace_left.style.borderRadius = '50%';

               var imgReplace_right = document.getElementById("right_profile_photo");
               imgReplace_right.src = "../data/Players/Images/"+value[1]+".jpg";
               imgReplace_right.style.visibility = "visible";
               imgReplace_right.style.borderRadius = '50%';

               var width = document.getElementById('column_left').offsetWidth*0.7;
             

             var chart = function(svg){
              var fullHorzPlot = new RINK_MAP({parent: svg, fullRink: false, desiredWidth: width, horizontal: false});
              fullHorzPlot();
              svg_left.attr("w3-container", "chart");
              return svg.node();
            }

            if (svg_left == null){
             var svg_left = d3.select("#field_left").append("svg")
             .attr("width", width)
             .attr("height", width*1.25);

             var svg_right = d3.select("#field_right").append("svg")
             .attr("width", width)
             .attr("height", width*1.25);

             chart(svg_left);
             chart(svg_right);
        }
              // setup x 
              var xValue = function(d) { return d.st_y;}, // data -> value
                  xScale = d3.scale.linear().range([0, width]), // value -> display
                  xMap = function(d) { return xScale(xValue(d));}, // data -> display
                  xAxis = d3.svg.axis().scale(xScale).orient("bottom");

              // setup y
              var yValue = function(d) { return d.st_x+100;}, // data -> value
                  yScale = d3.scale.linear().range([width*1.25, 0]), // value -> display
                  yMap = function(d) { return yScale(yValue(d));}, // data -> display
                  yAxis = d3.svg.axis().scale(yScale).orient("left");

              // setup fill color
              var cValue = function(d) { return d.rink_side;},
              color = d3.scale.category10();

              // add the tooltip area to the webpage
              var tooltip = d3.select("body").append("div")
              .attr("class", "tooltip")
              .style("opacity", 0);


              d3.csv("../data/Players/"+value[0]+".csv", function(error, data) {

                yScale.domain([100, 0]);
                xScale.domain([-42.5, 42.5]);

                // draw dots
                svg_left.select("g").selectAll(".dot")
                .data(data)
                .enter()
                .append("circle")
                .attr("class", "dot")
                .attr("r", 4)
                .attr("cx", xMap)
                .attr("cy", yMap)
                .style("fill", "blue")
                .style("opacity", .6)
                .on("mouseover", function(d) {
                  tooltip.transition()
                  .duration(200)
                  .style("opacity", .9);
                  tooltip.html(d.description+ ', ' + d.dateTime.substring(0, 10))
                  .style("left", (d3.event.pageX + 5) + "px")
                  .style("top", (d3.event.pageY - 28) + "px");
                })
                .on("mouseout", function(d) {
                  tooltip.transition()
                  .duration(500)
                  .style("opacity", 0);
                });
              });

            }

            d3.csv("../data/Players/"+value[1]+".csv", function(error, data) {

              yScale.domain([100, 0]);
              xScale.domain([-42.5, 42.5]);

                // draw dots
                svg_right.select("g").selectAll(".dot")
                .data(data)
                .enter()
                .append("circle")
                .attr("class", "dot")
                .attr("r", 4)
                .attr("cx", xMap)
                .attr("cy", yMap)
                .style("fill", "blue")
                .style("opacity", .6)
                .on("mouseover", function(d) {
                  tooltip.transition()
                  .duration(200)
                  .style("opacity", .9);
                  tooltip.html(d.description+ ', ' + d.dateTime.substring(0, 10))
                  .style("left", (d3.event.pageX + 5) + "px")
                  .style("top", (d3.event.pageY - 28) + "px");
                })
                .on("mouseout", function(d) {
                  tooltip.transition()
                  .duration(500)
                  .style("opacity", 0);
                })
                .on("mo");
              });
        // d3.csv("../data/Players/players.csv", function(error, data) {
        //   var

        // });

      }
    });
  </script>

  
  <script>

var data=[['Lite','CA',16,0],
['Small','CA',1278,4],
['Medium','CA',27,0],
['Plus','CA',58,0],
['Grand','CA',1551,15],
['Elite','CA',141,0],
['Lite','AZ',5453,35],
['Small','AZ',683,1],
['Medium','AZ',862,0],
['Grand','AZ',6228,30],
['Lite','AL',15001,449],
['Small','AL',527,3],
['Medium','AL',836,0],
['Plus','AL',28648,1419],
['Grand','AL',3,0],
['Lite','CO',13,0],
['Small','CO',396,0],
['Medium','CO',362,0],
['Plus','CO',78,10],
['Grand','CO',2473,32],
['Elite','CO',2063,64],
['Medium','DE',203,0],
['Grand','DE',686,2],
['Elite','DE',826,0],
['Lite','KS',1738,110],
['Small','KS',12925,13],
['Medium','KS',15413,0],
['Small','GA',2166,2],
['Medium','GA',86,0],
['Plus','GA',348,3],
['Grand','GA',4244,18],
['Elite','GA',1536,1],
['Small','IA',351,0],
['Grand','IA',405,1],
['Small','IL',914,1],
['Medium','IL',127,0],
['Grand','IL',1470,7],
['Elite','IL',516,1],
['Lite','IN',43,0],
['Small','IN',667,1],
['Medium','IN',172,0],
['Plus','IN',149,1],
['Grand','IN',1380,5],
['Elite','IN',791,23],
['Small','FL',1,0],
['Grand','FL',1,0],
['Small','MD',1070,1],
['Grand','MD',1171,2],
['Elite','MD',33,0],
['Plus','TX',1,0],
['Small','MS',407,0],
['Medium','MS',3,0],
['Grand','MS',457,2],
['Elite','MS',20,0],
['Small','NC',557,0],
['Medium','NC',167,0],
['Plus','NC',95,1],
['Grand','NC',1090,5],
['Elite','NC',676,6],
['Lite','NM',1195,99],
['Small','NM',350,3],
['Medium','NM',212,0],
['Grand','NM',1509,8],
['Lite','NV',3899,389],
['Small','NV',147,0],
['Medium','NV',455,0],
['Plus','NV',1,1],
['Grand','NV',4100,16],
['Lite','OH',12,0],
['Small','OH',634,2],
['Medium','OH',749,0],
['Plus','OH',119,1],
['Grand','OH',3705,19],
['Elite','OH',3456,25],
['Small','PA',828,2],
['Medium','PA',288,0],
['Plus','PA',141,0],
['Grand','PA',2625,7],
['Elite','PA',1920,10],
['Small','SC',1146,2],
['Medium','SC',212,0],
['Plus','SC',223,4],
['Grand','SC',1803,6],
['Elite','SC',761,8],
['Small','TN',527,0],
['Medium','TN',90,0],
['Grand','TN',930,4],
['Elite','TN',395,1],
['Lite','ME',7232,58],
['Small','ME',1272,0],
['Medium','ME',1896,0],
['Plus','ME',1,0],
['Grand','ME',10782,33],
['Elite','ME',1911,3],
['Small','VA',495,0],
['Medium','VA',32,0],
['Plus','VA',7,0],
['Grand','VA',1557,12],
['Elite','VA',24,0],
['Small','WA',460,1],
['Plus','WA',88,3],
['Grand','WA',956,3],
['Small','WV',232,0],
['Medium','WV',71,0],
['Grand','WV',575,2],
['Elite','WV',368,3]
];
var color ={Elite:"#3366CC", Grand:"#DC3912",  Lite:"#FF9900", Medium:"#109618", Plus:"#990099", Small:"#0099C6"};
var svg = d3.select("#assists").append("svg").attr("width", 960).attr("height", 800);

svg.append("text").attr("x",250).attr("y",70)
  .attr("class","header").text("Sales Attempt");
  
svg.append("text").attr("x",750).attr("y",70)
  .attr("class","header").text("Sales");

var g =[svg.append("g").attr("transform","translate(150,100)")
    ,svg.append("g").attr("transform","translate(650,100)")];

var bp=[ viz.bP()
    .data(data)
    .min(12)
    .pad(1)
    .height(600)
    .width(200)
    .barSize(35)
    .fill(d=>color[d.primary])    
  ,viz.bP()
    .data(data)
    .value(d=>d[3])
    .min(12)
    .pad(1)
    .height(600)
    .width(200)
    .barSize(35)
    .fill(d=>color[d.primary])
];
    
[0,1].forEach(function(i){
  g[i].call(bp[i])
  
  g[i].append("text").attr("x",-50).attr("y",-8).style("text-anchor","middle").text("Channel");
  g[i].append("text").attr("x", 250).attr("y",-8).style("text-anchor","middle").text("State");
  
  g[i].append("line").attr("x1",-100).attr("x2",0);
  g[i].append("line").attr("x1",200).attr("x2",300);
  
  g[i].append("line").attr("y1",610).attr("y2",610).attr("x1",-100).attr("x2",0);
  g[i].append("line").attr("y1",610).attr("y2",610).attr("x1",200).attr("x2",300);
  
  g[i].selectAll(".mainBars")
    .on("mouseover",mouseover)
    .on("mouseout",mouseout);

  g[i].selectAll(".mainBars").append("text").attr("class","label")
    .attr("x",d=>(d.part=="primary"? -30: 30))
    .attr("y",d=>+6)
    .text(d=>d.key)
    .attr("text-anchor",d=>(d.part=="primary"? "end": "start"));
  
  g[i].selectAll(".mainBars").append("text").attr("class","perc")
    .attr("x",d=>(d.part=="primary"? -100: 80))
    .attr("y",d=>+6)
    .text(function(d){ return d3.format("0.0%")(d.percent)})
    .attr("text-anchor",d=>(d.part=="primary"? "end": "start"));
});

function mouseover(d){
  [0,1].forEach(function(i){
    bp[i].mouseover(d);
    
    g[i].selectAll(".mainBars").select(".perc")
    .text(function(d){ return d3.format("0.0%")(d.percent)});
  });
}
function mouseout(d){
  [0,1].forEach(function(i){
    bp[i].mouseout(d);
    
    g[i].selectAll(".mainBars").select(".perc")
    .text(function(d){ return d3.format("0.0%")(d.percent)});
  });
}
d3.select(self.frameElement).style("height", "800px");
</script>

<script>
var margin = {top: 80, right: 80, bottom: 80, left: 80},
    width = 600 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;
var x = d3.scale.ordinal()
    .rangeRoundBands([0, width], .1);
var y0 = d3.scale.linear().domain([300, 1100]).range([height, 0]),
y1 = d3.scale.linear().domain([20, 80]).range([height, 0]);
var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");
// create left yAxis
var yAxisLeft = d3.svg.axis().scale(y0).ticks(4).orient("left");
// create right yAxis
var yAxisRight = d3.svg.axis().scale(y1).ticks(6).orient("right");
var svg = d3.select("hist").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("class", "graph")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
d3.tsv("data.tsv", type, function(error, data) {
  x.domain(data.map(function(d) { return d.year; }));
  y0.domain([0, d3.max(data, function(d) { return d.money; })]);
  
  svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);
  svg.append("g")
    .attr("class", "y axis axisLeft")
    .attr("transform", "translate(0,0)")
    .call(yAxisLeft)
  .append("text")
    .attr("y", 6)
    .attr("dy", "-2em")
    .style("text-anchor", "end")
    .style("text-anchor", "end")
    .text("Dollars");
  
  svg.append("g")
    .attr("class", "y axis axisRight")
    .attr("transform", "translate(" + (width) + ",0)")
    .call(yAxisRight)
  .append("text")
    .attr("y", 6)
    .attr("dy", "-2em")
    .attr("dx", "2em")
    .style("text-anchor", "end")
    .text("#");
  bars = svg.selectAll(".bar").data(data).enter();
  bars.append("rect")
      .attr("class", "bar1")
      .attr("x", function(d) { return x(d.year); })
      .attr("width", x.rangeBand()/2)
      .attr("y", function(d) { return y0(d.money); })
    .attr("height", function(d,i,j) { return height - y0(d.money); }); 
  bars.append("rect")
      .attr("class", "bar2")
      .attr("x", function(d) { return x(d.year) + x.rangeBand()/2; })
      .attr("width", x.rangeBand() / 2)
      .attr("y", function(d) { return y1(d.number); })
    .attr("height", function(d,i,j) { return height - y1(d.number); }); 
});
function type(d) {
  d.money = +d.money;
  return d;
}
</script>


    <script>

// Accordion 
function myAccFunc() {
  var x = document.getElementById("demoAcc");
  if (x.className.indexOf("w3-show") == -1) {
    x.className += " w3-show";
  } else {
    x.className = x.className.replace(" w3-show", "");
  }
}



// Open and close sidebar
function w3_open() {
  document.getElementById("mySidebar").style.display = "block";
  document.getElementById("myOverlay").style.display = "block";
}

function w3_close() {
  document.getElementById("mySidebar").style.display = "none";
  document.getElementById("myOverlay").style.display = "none";
}
</script>

</body>
</html>

